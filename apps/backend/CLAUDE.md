# CLAUDE.md

æ­¤æ–‡ä»¶ä¸º Claude Code åœ¨æ­¤ä»£ç åº“ä¸­å·¥ä½œæ—¶æä¾›æŒ‡å¯¼ã€‚

## é¡¹ç›®æ¦‚è¿°

**@tsfullstack/backend** - TypeScript å…¨æ ˆåç«¯ï¼ŒåŸºäº Fastify + Prisma + ZenStack + Effect æ„å»ºã€‚

## æ ¸å¿ƒæ¶æ„

- **æœåŠ¡å™¨å±‚** (`src/server/`) - Fastify HTTP æœåŠ¡å™¨
- **API å±‚** (`src/api/`) - æ¨¡å—åŒ–ä¸šåŠ¡é€»è¾‘
- **Context å±‚** (`src/Context/`) - Effect Context ä¾èµ–æ³¨å…¥
- **RPC ç³»ç»Ÿ** (`src/rpc/`) - ç±»å‹å®‰å…¨çš„è¿œç¨‹è°ƒç”¨
- **æ•°æ®åº“å±‚** (`src/db/`) - ZenStack å¢å¼ºçš„ Prisma
- **OAuth** (`src/OAuth/`) - GitHub è®¤è¯
- **åŠ¨æ€é¡¹ç›®** (`src/projects/`) - å¯åŠ¨æ€åŠ è½½çš„åç«¯æ¨¡å—

## æ ¸å¿ƒç‰¹æ€§

1. **Effect å‡½æ•°å¼æ¶æ„** - é”™è¯¯å¤„ç†å’Œä¾èµ–ç®¡ç†
2. **RPC ç³»ç»Ÿ** - ç±»å‹å®‰å…¨ã€å®‰å…¨æœºåˆ¶ã€ä¸­é—´ä»¶æ”¯æŒ
3. **ZenStack å®‰å…¨æ€§** - å£°æ˜å¼è®¿é—®æ§åˆ¶ã€RBAC
4. **å¤šæ–¹å¼è®¤è¯** - é‚®ç®±å¯†ç  + GitHub OAuth
5. **AI é›†æˆ** - å¤šæ¨¡å‹æ”¯æŒã€ä»£ç†æœåŠ¡ã€è°ƒç”¨æ—¥å¿—
6. **æ–‡ä»¶å¤„ç†** - æœ¬åœ°å­˜å‚¨ã€å…ƒæ•°æ®è¿½è¸ªã€æƒé™æ§åˆ¶
7. **é˜Ÿåˆ—ç³»ç»Ÿ** - ä»»åŠ¡é˜Ÿåˆ—ã€ä¼˜å…ˆçº§ã€å®šæ—¶ä»»åŠ¡
8. **ç›‘æ§ç³»ç»Ÿ** - å†…å­˜ç›‘æ§ã€æ™ºèƒ½æ—¥å¿—

## å¼€å‘å‘½ä»¤

```bash
# å¼€å‘å’Œæ„å»º
pnpm dev              # å¼€å‘æ¨¡å¼
pnpm build:lib        # æ„å»ºå‰ç«¯åº“
pnpm build            # æ„å»ºåç«¯
pnpm tsc:b            # ç±»å‹æ£€æŸ¥,ä¿®æ”¹ä»£ç åå¯è‡ªè¡ŒæŒ‰éœ€è¿è¡Œæ­¤å‘½ä»¤æ£€æŸ¥ä¿®æ”¹æ˜¯å¦æ­£ç¡®
```

## å¼€å‘è§„èŒƒ

- **ç±»å‹å®‰å…¨**: ä¸¥æ ¼æ¨¡å¼ï¼Œç¦ç”¨ `any`ï¼Œä¼˜å…ˆä½¿ç”¨ Effect
- **ä»£ç è´¨é‡**: å‡½æ•°å¼ç¼–ç¨‹ï¼Œå……åˆ†åˆ©ç”¨ç±»å‹æ¨å¯¼
- **æ„å»ºè¦æ±‚**: API/schema ä¿®æ”¹ api ä¸‹çš„ä»£ç ï¼Œæˆ–è€… projects ä¸‹çš„ä»£ç åå¿…é¡»æ‰§è¡Œ `pnpm build:lib`
- **æ•°æ®å®‰å…¨** é™¤éæˆ‘æ˜ç¡®è¦æ±‚ï¼Œå¦åˆ™ä¸èƒ½æ‰§è¡Œä»»ä½•å¯èƒ½åˆ é™¤æ•°æ®åº“æ•°æ®çš„å‘½ä»¤ï¼Œå¯¹äºæ•°æ®åº“è¿ç§»æ–‡ä»¶å¦‚æœå’Œæ•°æ®åº“å†…çš„è¿ç§»è®°å½•ä¸ä¸€è‡´å¯ä»¥é€‰æ‹©åˆ›å»ºä¸€ä¸ªæ–°çš„åŸºçº¿æ¥åº”ç”¨ä¿®æ”¹ï¼ˆç±»ä¼¼ pnpm zenstack migrate resolve --applied 20260228184653_init_baseline
ï¼‰

<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Feb 28, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #11340 | 5:21 PM | âš–ï¸ | Chosen Migration Strategy: Copy Legacy Migrations to ZenStack v3 Location | ~203 |
| #11334 | 5:20 PM | âœ… | Updated DATABASE_URL to Use Legacy Database Path | ~236 |
| #11333 | " | ğŸ”µ | ZenStack Generates schema.prisma with Tilde Prefix | ~203 |
| #11332 | " | ğŸ”µ | Database Configuration Uses SQLite with Socket Timeout | ~192 |
| #11318 | 5:17 PM | ğŸ”µ | ZenStack Schema Configuration Uses Policy and TypeScript Plugins | ~218 |
| #11314 | " | âœ… | Switched to ZenStack Migrate Deploy Command | ~277 |
| #11311 | " | âœ… | Added Dual Migration Directory Sync to Deployment Script | ~247 |
| #11305 | " | ğŸ”µ | No Migration Scripts Defined in package.json | ~181 |
| #11299 | 4:03 PM | âœ… | Added ZenStack Schema Generation Step to Remote Deployment | ~274 |
| #11298 | " | âœ… | Updated Deployment Script for ZenStack v3 Compatibility | ~268 |
| #11293 | 3:58 PM | ğŸ”µ | Backend Uses ZenStack v3.4.1 ORM Framework | ~270 |
| #11292 | " | ğŸ”µ | Current Deployment Script Uses Prisma v2 Binary Path | ~261 |
| #11291 | " | ğŸ”µ | ORM v3 Upgrade Impact Analysis | ~163 |
| #10912 | 1:41 PM | ğŸ”µ | ZenStack v3 generates schema, models, and input files in .zenstack directory | ~236 |
</claude-mem-context>